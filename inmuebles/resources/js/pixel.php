var pixel={pixelConfig:null,initialize:null,finalize:null,paramArray:[],pageLoadStatusFlag:false,checkReadyStateOnIntervals:null,pixelFireStatus:false,baseUrl:null,parse:function(){var b="",c="";try{if(!pixel.pixelFireStatus){pixel.checkReadyStateOnIntervals=setInterval(function(){pixel.checkIfPageLoadComplete();if(pixel.pageLoadStatusFlag&&!pixel.pixelFireStatus){try{pixel.initialize();pixel.getParams();pixel.finalize()}catch(d){pixel.paramArray.param="999";pixel.paramArray.err=d;b=pixel.getQueryString(pixel.paramArray);c=pixel.baseUrl+b;pixel.createIframe(c)}}},3000,"Javascript")}}catch(a){pixel.paramArray.param="999";pixel.paramArray.err=a;b=pixel.getQueryString(pixel.paramArray);c=pixel.baseUrl+b;pixel.createIframe(c)}},checkIfPageLoadComplete:function(){if(document.readyState==="interactive"||document.readyState==="complete"){pixel.pageLoadStatusFlag=true;clearInterval(pixel.checkReadyStateOnIntervals)}else{pixel.pageLoadStatusFlag=false}},getParams:function(){var b="",a="",c="";for(var d in pixel.pixelConfig){if(typeof pixel.pixelConfig[d]!=="undefined"&&pixel.pixelConfig[d]!==""){b=pixel.pixelConfig[d][1];a=pixel.pixelConfig[d][0];c=pixel.pixelConfig[d][2]}if(typeof b!=="undefined"&&b!==""){if(b==="xpath"&&typeof a!=="undefined"&&a!==""){pixel.paramArray[d]=pixel.getDataFromXPath(a,c)}else{if(typeof a!=="undefined"&&typeof c!=="undefined"&&b==="url"&&c!=""&&a!=""){pixel.paramArray[d]=pixel.getDataFromUrl(a,c)}}}}},getDataFromXPath:function(e,g){var d=[],n=[],a=[];var c="",k="",j="";var s="",f="";var l=0;var h=document.getElementsByTagName("body")[0];var b="undefined";var r=true;k=e.replace("/html/body/","");if(e.indexOf('@id="')!==-1){d=e.match(/.*\[@id="(.+)"\].*/);if(typeof d!=="undefined"&&d!==null&&d.length>=1){c=d[1]}}if(typeof c!=="undefined"&&c!==null&&c!==""){h=document.getElementById(c);var q='/*[@id="'+c+'"]/';var p='//*[@id="'+c+'"]/';var m='//*[@id="'+c+'"]';var o='*//*[@id="'+c+'"]/';k=k.replace(o,"");k=k.replace(p,"");k=k.replace(q,"");k=k.replace(m,"")}if(typeof k==="undefined"||k===null||k===""){h=document.getElementById(c)}else{n=k.split("/");for(l=0;l<n.length;l++){if(typeof n[l]!=="undefined"&&n[l]!==null){a=n[l].match(/(\w*)(\[(\d+)\])?/);if(typeof a!=="undefined"&&a!==null){s=a[1];f=1;if(a.length>=3&&typeof a[3]!=="undefined"&&a[3]!=""){f=a[3]}}}if(typeof h!==b&&h!==null&&h!="No Data"){h=pixel.getCurrentNode(h,s,f)}else{r=false;break}}}if(typeof h!==b&&h!==null&&r&&h!="No Data"){if(typeof g==="undefined"||g===""||g===null){if(typeof h.innerHTML!==b&&h.innerHTML!==null){j=h.innerHTML}}else{if(typeof h.getAttribute(g)!==b&&h.getAttribute(g)!==null){j=h.getAttribute(g)}}return pixel.removeJunk(j)}else{return""}},removeJunk:function(a){if(typeof a!=="undefined"&&a!==null&&a!==""){a=a.toString();a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/[ ]{2,}/gi," ");a=a.replace(/\n /,"\n");a=a.replace(/<.*?>/g,"");a=a.replace(/[ \t\r\n]+/g," ");a=a.replace(/^\s+|\s+$/g,"");a=a.replace(/&amp;/g,"&");return a}return""},getCurrentNode:function(f,c,g){var b="No Data";var a=1,e=0;var d="undefined";if(typeof f.childNodes!==d&&f.childNodes!==null){var h=f.childNodes;for(a=0;a<=h.length;a++){if(typeof h[a]!==d&&h[a]!==null&&typeof h[a].tagName!==d&&h[a].tagName!==null&&h[a].tagName.toLowerCase()===c){e++}if(e==g){b=h[a];break}}return b}else{return null}},getDataFromUrl:function(d,c){var b=null,a=document.URL;c=parseInt(c);b=a.match(d);if(typeof b!=="undefined"&&b!=null&&b!=""&&typeof b[c]!=="undefined"){if(c>=0){return b[c]}else{c=Math.abs(c);return b[b.length-c]}}return""},getParamFromUrl:function(c,e){var d=new RegExp("(?:\\?|&)"+e+"=(.*?)(?=&|$)","gi");var b=[],a;while((a=d.exec(c))!=null){b[b.length]=a[1]}if(b.length!==0){return b[0]}return""},createIframe:function(c){if(!(pixel.pixelFireStatus)){var b=document.createElement("iframe");b.src=c;b.scrolling="no";b.width=1;b.height=1;b.marginheight=0;b.marginwidth=0;b.frameborder=0;b.style.display="none";pixel.pixelFireStatus=true;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}},validateParams:function(a,e,d,c,b){var f=a.segment;var k=f.substring(0,1);var j=a[e];var i=a[d];var h=a[c];var g=a[b];switch(k){case"t":if(typeof j==="undefined"||j==""||typeof i==="undefined"||i==""){a.section=1;a.level=2;a.param="t100"}break;default:if((typeof j==="undefined"||j=="")&&(typeof i==="undefined"||i=="")&&(typeof h==="undefined"||h=="")&&(typeof g==="undefined"||g=="")){a.section=1;a.level=2;a.param=k+"100"}break}return a},paramChange:function(a){if(typeof a!=="undefined"&&a!==null){a=a.toString();a=a.replace(/<.*?>/g,"");a=a.replace(/[ \t\r\n]+/g," ");a=a.replace(/^\s+|\s+$/g,"");a=a.replace(/&amp;/g,"&");a=encodeURIComponent(encodeURIComponent(a));return a}return""},viz_call_fp:function(){if(pixel.viz_isSafari()){var a="vizid";var b=pixel.viz_getFPCookieValue(a);if(b==""||!b.match("^vizSF_")){b=pixel.viz_randomString();pixel.viz_setFPCookieValue(a,b,365)}return"&cb="+b+"&csm=2"}else{return""}},viz_setFPCookieValue:function(b,d,c){var a=new Date();a.setDate(a.getDate()+c);document.cookie=b+"="+d+";path=/;expires="+a.toGMTString()},viz_getFPCookieValue:function(c){var d=document.cookie;if(d.length>0){var b=d.indexOf(c+"=");if(b!=-1){b=b+c.length+1;var a=d.indexOf(";",b);if(a==-1){a=d.length}if(typeof decodeURIComponent(d.substring(b,a))!=="undefined"&&decodeURIComponent(d.substring(b,a))!=null){return decodeURIComponent(d.substring(b,a))}}}return""},viz_randomString:function(){var e=new Date();var d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var f=5;var c="";for(var b=0;b<f;b++){var a=Math.floor(Math.random()*d.length);c+=d.substring(a,a+1)}return("vizSF_"+e.getTime()+c)},viz_isSafari:function(){var b=navigator.userAgent;var a=pixel.viz_getUserBrowserName(b);if(/safari/i.test(a)){return true}else{return false}},viz_getUserBrowserName:function(a){if(a==null){return"UNKNOWN"}if(/mqqbrowser/i.test(a)){if(/adr/i.test(a)||/android/i.test(a)){return"MOBILE_ANDRIOD_MQQ"}else{if(/iphone/i.test(a)){return"MOBILE_IOS_MQQ"}else{if(/nokia/i.test(a)){return"MOBILE_WINDOWS_MQQ"}}}}if(/opera/i.test(a)||/opr/i.test(a)){if(/mobi/i.test(a)||/mini/i.test(a)){return"MOBILE_ANDROID_OPERA"}else{if(/tablet/i.test(a)){return"MOBILE_ANDROID_OPERA_TAB"}else{return"DESKTOP_OPERA"}}}if(/tencenttraveler/i.test(a)){return"MOBILE_WINDOWS_TENCENT"}if(/baidubrowser/i.test(a)){return"MOBILE_WINDOWS_BAIDU"}if(/iemobile/i.test(a)){return"MOBILE_WINDOWS_IE"}if(/criOS/i.test(a)){return"MOBILE_IOS_CHROME"}if(/ucbrowser/i.test(a)){if(/linux/i.test(a)){return"MOBILE_ANDROID_UCBROWSER"}if(/ios/i.test(a)||/ipad/i.test(a)){return"MOBILE_IOS_UCBROWSER"}}if(/android/i.test(a)&&/mobile safari/i.test(a)&&!/chrome/i.test(a)){return"MOBILE_ANDROID_DEFAULT"}if(/chrome/i.test(a)){if(/android/i.test(a)){return"MOBILE_ANDROID_CHROME"}return"DESKTOP_CHROME"}else{if(/msie/i.test(a)){return"DESKTOP_IE"}else{if(/firefox/i.test(a)){if(/android/i.test(a)){return"MOBILE_ANDROID_FIREFOX"}return"DESKTOP_FIREFOX"}else{if(/ipad/i.test(a)||/iphone/i.test(a)){return"MOBILE_IOS_SAFARI"}else{if(/safari/i.test(a)){return"DESKTOP_SAFARI"}}}}}return"OTHER"},getQueryString:function(a){var c=a.account_id;var e="?account_id="+c;delete a.account_id;var d="";for(var b in a){if(a.hasOwnProperty(b)){d=a[b];e+="&"+b+"="+pixel.paramChange(d)}}return e}};var config_e300={pid:[/-(.[^-#?&.]+)\.html/i,"url","1"],lp:[".*","url","0"]};pixel.baseUrl=("https:"==document.location.protocol?"https://ssl":"http://www")+".vizury.com/analyze/analyze.php";pixel.initialize=function(){var b=document.URL;pixel.paramArray.account_id="VIZVRM2208";pixel.paramArray.section=pixel.paramArray.level="1";var d=0,c="",f,e=false;var a=false;c=pixel.getElementsByAttribute("class","consultarAviso-formulario consultarAviso-formulario-footer enviando enviado","ficha","div");if(c[0]){e=true}if(!e){c=pixel.getDataFromXPath('//*[@id="id-verdatos-aviso-2"]/button/span[2]');if(!c){c=pixel.getElementsByAttribute("class","btn-phone-text","id-verdatos-aviso-2","span")[0];if(c){c=c.innerHTML}}if(c=="Ver teléfono"){a=true}}if((b.toLowerCase().indexOf("inmuebles24.com/propiedades/")!==-1&&!a)||(e)){pixel.paramArray.param="e500";pixel.pixelConfig=config_e300}else{if(b.toLowerCase().indexOf("inmuebles24.com/propiedades/")!==-1&&a){pixel.paramArray.param="e300";pixel.pixelConfig=config_e300}else{pixel.paramArray.param="e100"}}};pixel.finalize=function(){var e="undefined",o=encodeURIComponent;var f="",v="",g="",p="",m="",b="",c="",l="";var r=0,q=0,d=0,n="",w="",s="",h="",t="";var a=["","","","",""];if(pixel.paramArray.param==="e300"||pixel.paramArray.param==="e500"){h=document.getElementsByTagName("div");for(r=0;r<h.length;r++){if(h[r].getAttribute("itemprop")!==null&&h[r].getAttribute("itemprop")==="breadcrumb"){t=h[r].getElementsByTagName("li");for(q=1,d=0;q<t.length&&d<5;q++){if(typeof t[q].getElementsByTagName("a")[0]!=="undefined"){a[d++]=t[q].getElementsByTagName("a")[0].innerHTML.replace(/^\s+|\s+$/g,"")}}break}}for(r=0;r<h.length;r++){if(h[r].className==="rsContainer"&&typeof h[r].getElementsByTagName("img")[0]!=="undefined"){l=h[r].getElementsByTagName("img")[0].src}else{if(h[r].className==="module module-a caracteristicas-aviso"){n=h[r].getElementsByTagName("dd");if(typeof n[0]!==e&&typeof n[0].getElementsByTagName("span")[1]!==e){b=n[0].getElementsByTagName("span")[1].innerHTML.replace(/<.[^>]*>|[^0-9,.]/g,"")}if(typeof n[3]!==e&&typeof n[3].getElementsByTagName("span")[1]!==e){m=n[3].getElementsByTagName("span")[1].innerHTML.replace(/<.[^>]*>|[^0-9,.]/g,"")}if(typeof n[5]!==e&&typeof n[5].getElementsByTagName("span")[0]!==e&&/Recamaras/i.test(n[5].getElementsByTagName("span")[0].innerHTML)&&typeof n[5].getElementsByTagName("span")[1]!==e){w=n[5].getElementsByTagName("span")[1].innerHTML.replace(/<.[^>]*>|[^0-9]/g,"")}if(typeof n[6]!==e&&typeof n[6].getElementsByTagName("span")[0]!==e&&/Ba%C3%B1os/i.test(o(n[6].getElementsByTagName("span")[0].innerHTML))&&typeof n[6].getElementsByTagName("span")[1]!==e){s=n[6].getElementsByTagName("span")[1].innerHTML.replace(/<.[^>]*>|[^0-9]/g,"")}}}if(l&&b){break}}p=a[1];c=a[0]+" en "+p.toLowerCase();f=a[2]+"#"+p;v=f+"_"+a[3]+"#"+p;g=v+"_"+a[4]+"#"+p;pixel.paramArray.pname=c;pixel.paramArray.image=l;pixel.paramArray["new"]=b;pixel.paramArray.old=m;pixel.paramArray.catid=f;pixel.paramArray.subcat1id=v;pixel.paramArray.subcat2id=g;pixel.paramArray.misc=a[2];pixel.paramArray.misc1=a[3];if(w!==""&&s!==""){pixel.paramArray.pdesc=w+" Recamaras "+s+" Baños"}else{if(w!==""){pixel.paramArray.pdesc=w+" Recamaras"}else{pixel.paramArray.pdesc="Busca inmuebles en Mexico"}}}var u=pixel.getQueryString(pixel.paramArray);var k=pixel.baseUrl+u+pixel.viz_call_fp();pixel.createIframe(k)};if(!pixel.pixelFireStatus){pixel.parse()}pixel.getElementsByAttribute=function(m,c,g,a){var b=document.getElementById(g)||document;var o=a||"*";var h=c||"";var j=m||"class";var l=new RegExp("(?:^|\\s)("+h+")(?:\\s|$)","i");var n=[],d=0,f=0;var e=(o==="*"&&b.all)?b.all:b.getElementsByTagName(o);for(f=d=0;f<e.length;f++){if(l.test(e[f].getAttribute(j))){n[d++]=e[f]}}if(n.length>0){return n}return[]};